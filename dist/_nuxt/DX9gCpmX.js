import{a as l,b as d,c as p}from"./BTbU19mV.js";import{j as m,k as g,q as r,s as e,y as c,z as f,E as b,F as u,G as x,v as y,A as k,T as v,x as n,B as h,C as w}from"./DAn7dnkX.js";const _={data(){return{token:"",categories:[],selectedCategory:"",toastMessage:"",toastTimeout:null,showToast:!1,CategoryName:""}},mounted(){this.token=l.get("authtoken"),this.fetchCategory()},computed:{...g(p,["url"])},methods:{async fetchCategory(){try{const t=await d.get(`${this.url}api/cp/categories/`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});t.data.message==="Error"?this.$router.push("/auth/login"):this.categories=t.data}catch(t){console.error("ОШИБКА:",t),this.$router.push("/auth/login"),l.remove("authtoken")}},async createCategory(){try{const t={name:this.CategoryName};this.selectedCategory&&(t.parent_id=this.selectedCategory),console.log(t),console.log(`${this.url}api/cp/categories/`),await d.post(`${this.url}api/cp/categories/`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}}),this.toastMessage="Успешно создано!.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}catch{this.toastMessage="Ошибка при создании товара.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}},hideToast(){this.showToast=!1},beforeEnter(t){t.classList.add("toast-enter")},enter(t,s){t.addEventListener("animationend",s,{once:!0})},leave(t,s){t.classList.add("toast-exit"),t.addEventListener("animationend",s,{once:!0})}}},T={class:"max-w-8xl px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto"},C={class:"bg-gray-500 rounded-xl shadow p-4 sm:p-7"},E={class:"grid sm:grid-cols-12 gap-2 sm:gap-4 py-8 first:pt-0 last:pb-0 border-t first:border-transparent"},B=e("div",{class:"sm:col-span-3"},[e("label",{for:"af-submit-application-full-name",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Название категории ")],-1),L={class:"sm:col-span-9"},M={class:"sm:flex"},N=e("div",{class:"sm:col-span-3"},[e("label",{for:"af-submit-application-linkedin-url",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Выбрать родительскую категорию ( необязательно ) ")],-1),j={class:"sm:col-span-9"},z={class:"w-full md:w-full"},V=["value"],A={key:0,class:"toast fixed top-4 left-4 max-w-xs bg-gray-600 border border-rose-300 rounded-xl shadow-lg :",role:"alert",tabindex:"-1","aria-labelledby":"hs-toast-error-example-label"},S={class:"flex p-4"},D=e("div",{class:"shrink-0"},null,-1),F={class:"ms-3"},U={id:"hs-toast-error-example-label",class:"text-sm text-pink-700 dark:text-pink-300"},q=e("span",{class:"sr-only"},"Close",-1),G=e("svg",{class:"shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1),H=[q,G];function I(t,s,J,K,a,i){return n(),r(u,null,[e("div",T,[e("div",C,[e("form",null,[e("div",E,[B,e("div",L,[e("div",M,[c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>a.CategoryName=o),id:"af-submit-application-full-name",type:"text",class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[f,a.CategoryName]])])]),N,e("div",j,[e("div",z,[c(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>a.selectedCategory=o),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none",style:{overflow:"hidden","overflow-y":"auto","max-height":"72px"}},[(n(!0),r(u,null,x(a.categories,o=>(n(),r("option",{key:o.id,value:o.id,class:"py-2 px-4 text-sm text-black cursor-pointer font-montserrat hover:bg-white rounded-lg focus:outline-none focus:bg-white"},h(o.name),9,V))),128))],512),[[b,a.selectedCategory]])])])]),e("button",{onClick:s[2]||(s[2]=(...o)=>i.createCategory&&i.createCategory(...o)),type:"button",class:"font-montserrat w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-pink-600 text-white hover:bg-white hover:text-black transition focus:outline-none focus:bg-white disabled:opacity-50 disabled:pointer-events-none"}," Создать ")])])]),y(v,{name:"toast",onBeforeEnter:i.beforeEnter,onEnter:i.enter,onLeave:i.leave},{default:k(()=>[a.showToast?(n(),r("div",A,[e("div",S,[D,e("div",F,[e("p",U,h(a.toastMessage),1)]),e("button",{type:"button",class:"inline-flex shrink-0 justify-center items-center size-5 rounded-lg text-white bg-pink-900 hover:bg-pink-600 focus:outline-none focus:bg-white","aria-label":"Close",onClick:s[3]||(s[3]=(...o)=>i.hideToast&&i.hideToast(...o))},H)])])):w("",!0)]),_:1},8,["onBeforeEnter","onEnter","onLeave"])],64)}const Q=m(_,[["render",I]]);export{Q as default};
