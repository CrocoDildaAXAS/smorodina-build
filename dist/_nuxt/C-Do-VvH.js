import{a as n,b as c,c as p}from"./BTbU19mV.js";import{j as u,k as m,q as r,s as e,y as l,z as d,v as k,A as w,T as _,x as h,B as f,C as v}from"./DAn7dnkX.js";const x={data(){return{login:"",password:"",token:"",showToast:!1,toastMessage:"",toastTimeout:null}},mounted(){this.token=n.get("authtoken"),this.checkedUser()},computed:{...m(p,["url"])},methods:{async sendData(){try{const t=await c.post(`${this.url}api/sign-in/email-password/`,{email:this.login,password:this.password},{headers:{"Content-Type":"application/json"}});t.data.token&&(n.set("authtoken",t.data.token),this.$router.push("/admin"))}catch(t){console.error("ОШИБКА:",t),this.toastMessage="Произошла ошибка при входе. Пожалуйста, проверьте введенные данные и попробуйте снова.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}},async checkedUser(){this.token?this.$router.push("/admin"):this.$router.push("/auth/login")},hideToast(){this.showToast=!1},beforeEnter(t){t.classList.add("toast-enter")},enter(t,s){t.addEventListener("animationend",s,{once:!0})},leave(t,s){t.classList.add("toast-exit"),t.addEventListener("animationend",s,{once:!0})}}},g={class:"wrapper"},b=e("div",{class:"header"},[e("p",{class:"header--supertitle"},"Добро пожаловать в Админ панель"),e("h1",{class:"font-sans header--title"},"Smorodina")],-1),z={class:"authorization font-mono"},T={class:"authorization--form"},y={class:"authorization--label"},C=e("p",{class:"authorization--name"},"Логин",-1),M=e("div",{class:"hidden absolute inset-y-0 end-0 pointer-events-none pe-3"},[e("svg",{class:"size-5 text-pink-400",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16","aria-hidden":"true"},[e("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})])],-1),B={class:"authorization--label"},L=e("p",{class:"authorization--name"},"Пароль",-1),E=e("div",{class:"hidden absolute inset-y-0 end-0 pointer-events-none pe-3"},[e("svg",{class:"size-5 text-pink-400",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16","aria-hidden":"true"},[e("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})])],-1),A={key:0,class:"toast fixed top-4 left-4 max-w-xs bg-pink-100 border border-pink-300 rounded-xl shadow-lg dark:bg-pink-700 dark:border-pink-600",role:"alert",tabindex:"-1","aria-labelledby":"hs-toast-error-example-label"},D={class:"flex p-4"},V=e("div",{class:"shrink-0"},[e("svg",{class:"shrink-0 size-4 text-red-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[e("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})])],-1),j={class:"ms-3"},U={id:"hs-toast-error-example-label",class:"text-sm text-pink-700 dark:text-pink-300"},N=e("span",{class:"sr-only"},"Close",-1),S=e("svg",{class:"shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1),q=[N,S];function F(t,s,G,H,i,o){return h(),r("div",g,[b,e("div",z,[e("form",T,[e("label",y,[C,l(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>i.login=a),type:"email",id:"email",name:"email",placeholder:"user@mail.com",class:"authorization--input"},null,512),[[d,i.login]]),M]),e("label",B,[L,l(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>i.password=a),type:"password",id:"password",name:"password",placeholder:"********",class:"authorization--input"},null,512),[[d,i.password]]),E]),e("button",{type:"button",onClick:s[2]||(s[2]=(...a)=>o.sendData&&o.sendData(...a)),class:"authorization--submit"},"Войти")])]),k(_,{name:"toast",onBeforeEnter:o.beforeEnter,onEnter:o.enter,onLeave:o.leave},{default:w(()=>[i.showToast?(h(),r("div",A,[e("div",D,[V,e("div",j,[e("p",U,f(i.toastMessage),1)]),e("button",{type:"button",class:"inline-flex shrink-0 justify-center items-center size-5 rounded-lg text-white bg-pink-900 hover:bg-pink-600 focus:outline-none focus:bg-pink-700","aria-label":"Close",onClick:s[3]||(s[3]=(...a)=>o.hideToast&&o.hideToast(...a))},q)])])):v("",!0)]),_:1},8,["onBeforeEnter","onEnter","onLeave"])])}const K=u(x,[["render",F]]);export{K as default};
