import{a as p,b as l,c}from"./BTbU19mV.js";import{j as u,k as h,q as d,s as t,y as i,z as n,v as b,A as f,T as x,F as y,x as m,B as g,C as k}from"./DAn7dnkX.js";const w={data(){return{firstName:"",lastName:"",patronymic:"",email:"",tel:"",password:"",showToast:!1,toastMessage:"",toastTimeout:null}},computed:{...h(c,["url"])},mounted(){this.token=p.get("authtoken"),this.checkedUser()},methods:{async checkedUser(){try{const s=await l.get(`${this.url}api/cp/users/me/`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});this.firstName=s.data.firstName,this.lastName=s.data.lastName,this.patronymic=s.data.patronymic,this.email=s.data.email,this.tel=s.data.tel,this.password=s.data.password}catch(s){console.error("ОШИБКА:",s),this.$router.push("/auth/login")}},async updateUserInfo(){try{const s=await l.put(`${this.url}api/cp/users/me/`,{firstName:this.firstName,lastName:this.lastName,patronymic:this.patronymic,email:this.email,tel:this.tel,password:this.password},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});this.toastMessage="Информация успешно обновлена!",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}catch(s){this.toastMessage="Ошибка при обновлении информации.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3),console.error("Ошибка при обновлении информации:",s)}},hideToast(){this.showToast=!1},beforeEnter(s){s.classList.add("toast-enter")},enter(s,e){s.addEventListener("animationend",e,{once:!0})},leave(s,e){s.classList.add("toast-exit"),s.addEventListener("animationend",e,{once:!0})}}},_={class:"custom-bg max-w-4xl px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto"},v={class:"bg-gray-500 rounded-xl shadow p-4 sm:p-7"},T={class:"grid sm:grid-cols-12 gap-2 sm:gap-4 py-8 first:pt-0 last:pb-0 border-t first:border-transparent border-pink-700"},N=t("div",{class:"sm:col-span-12"},[t("h2",{class:"text-lg font-semibold text-pink-100 font-montserrat"}," Профиль ")],-1),U=t("div",{class:"sm:col-span-3"},[t("label",{for:"firstName",class:"inline-block text-sm font-medium text-white mt-2.5 font-montserrat"}," Имя ")],-1),C={class:"sm:col-span-9"},E=t("div",{class:"sm:col-span-3"},[t("label",{for:"lastName",class:"inline-block text-sm font-medium text-white mt-2.5 font-montserrat"}," Фамилия ")],-1),B={class:"sm:col-span-9"},V=t("div",{class:"sm:col-span-3"},[t("label",{for:"patronymic",class:"font-montserrat inline-block text-sm font-medium text-white mt-2.5"}," Отчество ")],-1),j={class:"sm:col-span-9"},L=t("div",{class:"sm:col-span-3"},[t("div",{class:"inline-block"},[t("label",{for:"tel",class:"font-montserrat inline-block text-sm font-medium text-white mt-2.5"}," Номер телефона ")])],-1),M={class:"sm:col-span-9"},z={class:"grid sm:grid-cols-12 gap-2 sm:gap-4 py-8 first:pt-0 last:pb-0 border-t first:border-transparent border-pink-700"},A=t("div",{class:"sm:col-span-12"},[t("h2",{class:"text-lg font-semibold text-pink-100"}," Учетная запись ")],-1),I=t("div",{class:"sm:col-span-3"},[t("label",{for:"email",class:"inline-block text-sm font-medium font-montserrat text-white mt-2.5"}," Email ")],-1),D={class:"sm:col-span-9"},F=t("div",{class:"sm:col-span-3"},[t("label",{for:"password",class:"font-montserrat inline-block text-sm font-medium text-white mt-2.5"}," Пароль ")],-1),S={class:"sm:col-span-9"},q={key:0,class:"toast fixed top-4 left-4 max-w-xs bg-gray-600 border border-rose-300 rounded-xl shadow-lg dark:border-gray-400 dark:border-gray-300",role:"alert",tabindex:"-1","aria-labelledby":"hs-toast-error-example-label"},G={class:"flex p-4"},H=t("div",{class:"shrink-0"},null,-1),J={class:"ms-3"},K={id:"hs-toast-error-example-label",class:"text-sm text-pink-700 dark:text-white"},O=t("span",{class:"sr-only"},"Close",-1),P=t("svg",{class:"shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 6 6 18"}),t("path",{d:"m6 6 12 12"})],-1),Q=[O,P];function R(s,e,W,X,a,r){return m(),d(y,null,[t("div",_,[t("div",v,[t("form",null,[t("div",T,[N,U,t("div",C,[i(t("input",{id:"firstName",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.firstName=o),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[n,a.firstName]])]),E,t("div",B,[i(t("input",{id:"lastName",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>a.lastName=o),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[n,a.lastName]])]),V,t("div",j,[i(t("input",{id:"patronymic",type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>a.patronymic=o),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[n,a.patronymic]])]),L,t("div",M,[i(t("input",{id:"tel",type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>a.tel=o),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm rounded-lg text-sm focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[n,a.tel]])])]),t("div",z,[A,I,t("div",D,[i(t("input",{id:"email",type:"email","onUpdate:modelValue":e[4]||(e[4]=o=>a.email=o),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[n,a.email]])]),F,t("div",S,[i(t("input",{id:"password",type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>a.password=o),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[n,a.password]])])]),t("button",{onClick:e[6]||(e[6]=(...o)=>r.updateUserInfo&&r.updateUserInfo(...o)),type:"button",class:"font-montserrat w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-pink-600 text-white hover:border-gray-400 focus:outline-none focus:border-gray-400 disabled:opacity-50 disabled:pointer-events-none"}," Изменить ")])])]),b(x,{name:"toast",onBeforeEnter:r.beforeEnter,onEnter:r.enter,onLeave:r.leave},{default:f(()=>[a.showToast?(m(),d("div",q,[t("div",G,[H,t("div",J,[t("p",K,g(a.toastMessage),1)]),t("button",{type:"button",class:"inline-flex shrink-0 justify-center items-center size-5 rounded-lg text-white bg-pink-900 hover:bg-pink-600 focus:outline-none focus:border-gray-400","aria-label":"Close",onClick:e[7]||(e[7]=(...o)=>r.hideToast&&r.hideToast(...o))},Q)])])):k("",!0)]),_:1},8,["onBeforeEnter","onEnter","onLeave"])],64)}const $=u(w,[["render",R]]);export{$ as default};
