import{a as f,b as u,c as b}from"./BTbU19mV.js";import{j as x,r as c,k as g,q as n,s as t,y as d,E as y,F as p,G as k,z as h,v,A as w,T as _,x as l,B as m,C as T}from"./DAn7dnkX.js";const C={data(){return{token:"",characteristics:[],products:[],toastMessage:"",toastTimeout:null,showToast:!1,selectedProduct:" ",characteristicsValue:"",characteristicsType:"",productID:""}},setup(){const s=c(""),e=c("");return c([]),{characteristicsValue:s,characteristicsType:e}},mounted(){this.token=f.get("authtoken"),this.fetchProducts()},computed:{...g(b,["url"])},methods:{getProductId(s){const e=s.target.value;this.productID=e,console.log("product id: ",this.productID)},async fetchProducts(){try{const s=await u.get(`${this.url}api/cp/products/`,{headers:{accept:"application/json",Authorization:`Bearer ${this.token}`}});this.products=s.data}catch(s){this.error=s}},async createCategory(){try{const s={type:this.characteristicsType,value:this.characteristicsValue,product_id:this.productID};console.log(s),await u.post(`${this.url}api/cp/characteristics/`,s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}}),this.toastMessage="Успешно создано!.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}catch{this.toastMessage="Ошибка при создании товара.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}},hideToast(){this.showToast=!1},beforeEnter(s){s.classList.add("toast-enter")},enter(s,e){s.addEventListener("animationend",e,{once:!0})},leave(s,e){s.classList.add("toast-exit"),s.addEventListener("animationend",e,{once:!0})}}},V={class:"max-w-8xl px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto"},E={class:"bg-gray-500 rounded-xl shadow p-4 sm:p-7"},B={class:"grid sm:grid-cols-12 gap-2 sm:gap-4 py-8 first:pt-0 last:pb-0 border-t first:border-transparent"},I=t("div",{class:"sm:col-span-3"},[t("label",{for:"af-submit-application-linkedin-url",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Выбрать товар ")],-1),L={class:"sm:col-span-9"},M={class:"w-full md:w-full"},P=["value"],j=t("div",{class:"sm:col-span-3"},[t("label",{for:"af-submit-application-full-name",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Тип характеристики ")],-1),D={class:"sm:col-span-9"},z={class:"sm:flex"},A=t("div",{class:"sm:col-span-3"},[t("label",{for:"af-submit-application-full-name",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Характеристика ")],-1),N={class:"sm:col-span-9"},S={class:"sm:flex"},U={key:0,class:"toast fixed top-4 left-4 max-w-xs bg-gray-600 border border-rose-300 rounded-xl shadow-lg :",role:"alert",tabindex:"-1","aria-labelledby":"hs-toast-error-example-label"},F={class:"flex p-4"},q=t("div",{class:"shrink-0"},null,-1),G={class:"ms-3"},H={id:"hs-toast-error-example-label",class:"text-sm text-pink-700 dark:text-pink-300"},J=t("span",{class:"sr-only"},"Close",-1),K=t("svg",{class:"shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 6 6 18"}),t("path",{d:"m6 6 12 12"})],-1),O=[J,K];function Q(s,e,R,r,i,a){return l(),n(p,null,[t("div",V,[t("div",E,[t("form",null,[t("div",B,[I,t("div",L,[t("div",M,[d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.selectedProduct=o),onChange:e[1]||(e[1]=o=>a.getProductId(o)),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none",style:{overflow:"hidden","overflow-y":"auto","max-height":"72px"}},[(l(!0),n(p,null,k(i.products,o=>(l(),n("option",{key:o.id,value:o.id,class:"py-2 px-4 text-sm text-black cursor-pointer font-montserrat hover:bg-white rounded-lg focus:outline-none focus:bg-white"},m(o.name),9,P))),128))],544),[[y,i.selectedProduct]])])]),j,t("div",D,[t("div",z,[d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.characteristicsType=o),id:"af-submit-application-full-name",type:"text",class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[h,r.characteristicsType]])])]),A,t("div",N,[t("div",S,[d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.characteristicsValue=o),id:"af-submit-application-full-name",type:"text",class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[h,r.characteristicsValue]])])])]),t("button",{onClick:e[4]||(e[4]=(...o)=>a.createCategory&&a.createCategory(...o)),type:"button",class:"font-montserrat w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-pink-600 text-white hover:bg-white hover:text-black transition focus:outline-none focus:bg-white disabled:opacity-50 disabled:pointer-events-none"}," Создать ")])])]),v(_,{name:"toast",onBeforeEnter:a.beforeEnter,onEnter:a.enter,onLeave:a.leave},{default:w(()=>[i.showToast?(l(),n("div",U,[t("div",F,[q,t("div",G,[t("p",H,m(i.toastMessage),1)]),t("button",{type:"button",class:"inline-flex shrink-0 justify-center items-center size-5 rounded-lg text-white bg-pink-900 hover:bg-pink-600 focus:outline-none focus:bg-white","aria-label":"Close",onClick:e[5]||(e[5]=(...o)=>a.hideToast&&a.hideToast(...o))},O)])])):T("",!0)]),_:1},8,["onBeforeEnter","onEnter","onLeave"])],64)}const Y=x(C,[["render",Q]]);export{Y as default};
