import{a as h,b as p,c as g}from"./BTbU19mV.js";import{j as k,r,k as x,q as l,s as t,y as d,E as y,F as f,G as v,z as m,v as w,A as _,T,x as c,B as b,C}from"./DAn7dnkX.js";const E={data(){return{token:"",feedback:[],toastMessage:"",toastTimeout:null,showToast:!1,feedbackName:"",feedbackComment:"",feedbackRating:"",selectedProduct:" ",productID:""}},setup(){const s=r(""),e=r(""),u=r(""),a=r([]);return{feedbackName:s,feedbackComment:e,feedbackRating:u,products:a}},mounted(){this.token=h.get("authtoken"),this.fetchProducts()},computed:{...x(g,["url"])},methods:{getProductId(s){const e=s.target.value;this.productID=e,console.log("product id: ",this.productID)},async fetchProducts(){try{const s=await p.get(`${this.url}api/cp/products/`,{headers:{accept:"application/json",Authorization:`Bearer ${this.token}`}});this.products=s.data}catch(s){this.error=s}},async createCategory(){try{const s={name:this.feedbackName,buyerComment:this.feedbackComment,byuerRating:+this.feedbackRating,product_id:this.productID},e=`${this.url}api/cp/feedback`;console.log(e),console.log(s),await p.post(e,s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}}),this.toastMessage="Успешно создано!.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}catch{this.toastMessage="Ошибка при создании товара.",this.showToast=!0,this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{this.hideToast()},5e3)}},hideToast(){this.showToast=!1},beforeEnter(s){s.classList.add("toast-enter")},enter(s,e){s.addEventListener("animationend",e,{once:!0})},leave(s,e){s.classList.add("toast-exit"),s.addEventListener("animationend",e,{once:!0})}}},B={class:"max-w-8xl px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto"},N={class:"bg-gray-500 rounded-xl shadow p-4 sm:p-7"},I={class:"grid sm:grid-cols-12 gap-2 sm:gap-4 py-8 first:pt-0 last:pb-0 border-t first:border-transparent"},L=t("div",{class:"sm:col-span-3"},[t("label",{for:"af-submit-application-linkedin-url",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Выбрать товар ")],-1),M={class:"sm:col-span-9"},P={class:"w-full md:w-full"},V=["value"],j=t("div",{class:"sm:col-span-3"},[t("label",{for:"af-submit-application-full-name",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Ваше имя ")],-1),D={class:"sm:col-span-9"},R={class:"sm:flex"},z=t("div",{class:"sm:col-span-3"},[t("div",{class:"inline-block"},[t("label",{for:"af-submit-application-bio",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Комментарий ")])],-1),U={class:"sm:col-span-9"},A=t("div",{class:"sm:col-span-3"},[t("label",{for:"af-submit-application-full-name",class:"inline-block text-sm font-medium text-white font-montserrat mt-2.5"}," Оценка ")],-1),S={class:"sm:col-span-9"},F={class:"sm:flex"},q={key:0,class:"toast fixed top-4 left-4 max-w-xs bg-gray-600 border border-rose-300 rounded-xl shadow-lg :",role:"alert",tabindex:"-1","aria-labelledby":"hs-toast-error-example-label"},G={class:"flex p-4"},H=t("div",{class:"shrink-0"},null,-1),J={class:"ms-3"},K={id:"hs-toast-error-example-label",class:"text-sm text-pink-700 dark:text-pink-300"},O=t("span",{class:"sr-only"},"Close",-1),Q=t("svg",{class:"shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 6 6 18"}),t("path",{d:"m6 6 12 12"})],-1),W=[O,Q];function X(s,e,u,a,i,n){return c(),l(f,null,[t("div",B,[t("div",N,[t("form",null,[t("div",I,[L,t("div",M,[t("div",P,[d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.selectedProduct=o),onChange:e[1]||(e[1]=o=>n.getProductId(o)),class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none",style:{overflow:"hidden","overflow-y":"auto","max-height":"72px"}},[(c(!0),l(f,null,v(a.products,o=>(c(),l("option",{key:o.id,value:o.id,class:"py-2 px-4 text-sm text-black cursor-pointer font-montserrat hover:bg-white rounded-lg focus:outline-none focus:bg-white"},b(o.name),9,V))),128))],544),[[y,i.selectedProduct]])])]),j,t("div",D,[t("div",R,[d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.feedbackName=o),id:"af-submit-application-full-name",type:"text",class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[m,a.feedbackName]])])]),z,t("div",U,[d(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>a.feedbackComment=o),id:"af-submit-application-bio",class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none",rows:"6",placeholder:""},null,512),[[m,a.feedbackComment]])]),A,t("div",S,[t("div",F,[d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>a.feedbackRating=o),id:"af-submit-application-full-name",type:"number",class:"font-montserrat py-2 px-3 pe-11 block w-full border-gray-300 border-gray-400 text-black shadow-sm text-sm rounded-lg focus:border-pink-500 focus:ring-pink-500 disabled:opacity-50 disabled:pointer-events-none"},null,512),[[m,a.feedbackRating]])])])]),t("button",{onClick:e[5]||(e[5]=(...o)=>n.createCategory&&n.createCategory(...o)),type:"button",class:"font-montserrat w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-pink-600 text-white hover:bg-white hover:text-black transition focus:outline-none focus:bg-white disabled:opacity-50 disabled:pointer-events-none"}," Создать ")])])]),w(T,{name:"toast",onBeforeEnter:n.beforeEnter,onEnter:n.enter,onLeave:n.leave},{default:_(()=>[i.showToast?(c(),l("div",q,[t("div",G,[H,t("div",J,[t("p",K,b(i.toastMessage),1)]),t("button",{type:"button",class:"inline-flex shrink-0 justify-center items-center size-5 rounded-lg text-white bg-pink-900 hover:bg-pink-600 focus:outline-none focus:bg-white","aria-label":"Close",onClick:e[6]||(e[6]=(...o)=>n.hideToast&&n.hideToast(...o))},W)])])):C("",!0)]),_:1},8,["onBeforeEnter","onEnter","onLeave"])],64)}const $=k(E,[["render",X]]);export{$ as default};
